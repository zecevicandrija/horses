import{fetch as O}from"undici";import{join as g}from"node:path";async function c({apiKey:o,apiVersion:t="v1",baseUrl:s="https://api.lemonsqueezy.com",data:r,headers:k,include:h,method:i="GET",page:d,params:m,path:f}){try{let n=new URL(g(t,f),s);h&&n.searchParams.append("include",h.map(u=>p[u]).join(",")),d&&n.searchParams.append("page",d.toString()),m&&i==="GET"&&Object.entries(m).forEach(([u,e])=>n.searchParams.append(u,e));let a=await O(n.href,{headers:{Accept:"application/vnd.api+json",Authorization:`Bearer ${o}`,"Content-Type":"application/vnd.api+json",...k},method:i,...r&&i!=="GET"?{body:JSON.stringify(r)}:{}});if(!a.ok){let u=await a.json();throw{status:a.status,message:a.statusText,errors:u.errors}}let l=await a.json();if(l.errors&&l.errors.length>0)throw l;return l}catch(n){throw n}}var p=(e=>(e.checkouts="checkouts",e.customers="customers",e.discounts="discounts",e.files="files",e.license_key_instances="license-key-instances",e.license_keys="license-keys",e.order_items="order-items",e.orders="orders",e.products="products",e.stores="stores",e.subscriptions="subscriptions",e.subscription_invoices="subscription-invoices",e.users="users",e.variants="variants",e))(p||{});async function C(o){let{checkout_data:t,checkout_options:s,custom_price:r,expires_at:k,product_options:h,store:i,variant:d,...m}=o;return c({data:{data:{attributes:{checkout_data:t,checkout_options:s,custom_price:r,expires_at:k,product_options:h},relationships:{store:{data:{id:i,type:"stores"}},variant:{data:{id:d,type:"variants"}}},type:"checkouts"}},path:"/checkouts",method:"POST",...m})}async function y(o){let{storeId:t,variantId:s,...r}=o;return c({params:{...t?{store_id:t}:{},...s?{variant_id:s}:{}},path:"/checkouts",...r})}async function R(o){let{id:t,...s}=o;return c({path:`/checkouts/${t}`,...s})}var _={createCheckout:C,listAllCheckouts:y,retrieveCheckout:R};export{C as createCheckout,_ as default,y as listAllCheckouts,R as retrieveCheckout};
//# sourceMappingURL=checkout.mjs.map