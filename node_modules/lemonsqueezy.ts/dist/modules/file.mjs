import{fetch as O}from"undici";import{join as L}from"node:path";async function p({apiKey:r,apiVersion:s="v1",baseUrl:i="https://api.lemonsqueezy.com",data:c,headers:h,include:m,method:u="GET",page:d,params:f,path:y}){try{let t=new URL(L(s,y),i);m&&t.searchParams.append("include",m.map(o=>l[o]).join(",")),d&&t.searchParams.append("page",d.toString()),f&&u==="GET"&&Object.entries(f).forEach(([o,e])=>t.searchParams.append(o,e));let n=await O(t.href,{headers:{Accept:"application/vnd.api+json",Authorization:`Bearer ${r}`,"Content-Type":"application/vnd.api+json",...h},method:u,...c&&u!=="GET"?{body:JSON.stringify(c)}:{}});if(!n.ok){let o=await n.json();throw{status:n.status,message:n.statusText,errors:o.errors}}let a=await n.json();if(a.errors&&a.errors.length>0)throw a;return a}catch(t){throw t}}var l=(e=>(e.checkouts="checkouts",e.customers="customers",e.discounts="discounts",e.files="files",e.license_key_instances="license-key-instances",e.license_keys="license-keys",e.order_items="order-items",e.orders="orders",e.products="products",e.stores="stores",e.subscriptions="subscriptions",e.subscription_invoices="subscription-invoices",e.users="users",e.variants="variants",e))(l||{});async function R(r){let{variantId:s,...i}=r;return p({params:{...s?{variant_id:s}:{}},path:"/files",...i})}async function g(r){let{id:s,...i}=r;return p({path:`/files/${s}`,...i})}var E={listAllFiles:R,retrieveFile:g};export{E as default,R as listAllFiles,g as retrieveFile};
//# sourceMappingURL=file.mjs.map