import{fetch as g}from"undici";import{join as O}from"node:path";async function d({apiKey:i,apiVersion:s="v1",baseUrl:t="https://api.lemonsqueezy.com",data:r,headers:a,include:o,method:n="GET",page:m,params:b,path:f}){try{let p=new URL(O(s,f),t);o&&p.searchParams.append("include",o.map(c=>l[c]).join(",")),m&&p.searchParams.append("page",m.toString()),b&&n==="GET"&&Object.entries(b).forEach(([c,e])=>p.searchParams.append(c,e));let u=await g(p.href,{headers:{Accept:"application/vnd.api+json",Authorization:`Bearer ${i}`,"Content-Type":"application/vnd.api+json",...a},method:n,...r&&n!=="GET"?{body:JSON.stringify(r)}:{}});if(!u.ok){let c=await u.json();throw{status:u.status,message:u.statusText,errors:c.errors}}let S=await u.json();if(S.errors&&S.errors.length>0)throw S;return S}catch(p){throw p}}var l=(e=>(e.checkouts="checkouts",e.customers="customers",e.discounts="discounts",e.files="files",e.license_key_instances="license-key-instances",e.license_keys="license-keys",e.order_items="order-items",e.orders="orders",e.products="products",e.stores="stores",e.subscriptions="subscriptions",e.subscription_invoices="subscription-invoices",e.users="users",e.variants="variants",e))(l||{});async function R(i){let{orderId:s,orderItemId:t,productId:r,storeId:a,variantId:o,...n}=i;return d({params:{...s?{order_id:s}:{},...t?{order_item_id:t}:{},...r?{product_id:r}:{},...a?{store_id:a}:{},...o?{variant_id:o}:{}},path:"/subscriptions",...n})}async function y(i){let{id:s,...t}=i;return d({path:`/subscriptions/${s}`,...t})}async function h(i){let{billingAnchor:s,cancelled:t,id:r,pause:a,productId:o,variantId:n,invoiceImmediately:m,disableProrations:b,...f}=i;return d({data:{data:{attributes:{billing_anchor:s,cancelled:t,pause:a,product_id:o,variant_id:n,invoice_immediately:m,disable_prorations:b},id:r,type:"subscriptions"}},path:`/subscriptions/${r}`,method:"PATCH",...f})}var B={listAllSubscriptions:R,retrieveSubscription:y,updateSubscription:h};export{B as default,R as listAllSubscriptions,y as retrieveSubscription,h as updateSubscription};
//# sourceMappingURL=subscription.mjs.map