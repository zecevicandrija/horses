import{fetch as O}from"undici";import{join as L}from"node:path";async function u({apiKey:r,apiVersion:s="v1",baseUrl:n="https://api.lemonsqueezy.com",data:d,headers:h,include:m,method:c="GET",page:l,params:f,path:y}){try{let t=new URL(L(s,y),n);m&&t.searchParams.append("include",m.map(i=>p[i]).join(",")),l&&t.searchParams.append("page",l.toString()),f&&c==="GET"&&Object.entries(f).forEach(([i,e])=>t.searchParams.append(i,e));let o=await O(t.href,{headers:{Accept:"application/vnd.api+json",Authorization:`Bearer ${r}`,"Content-Type":"application/vnd.api+json",...h},method:c,...d&&c!=="GET"?{body:JSON.stringify(d)}:{}});if(!o.ok){let i=await o.json();throw{status:o.status,message:o.statusText,errors:i.errors}}let a=await o.json();if(a.errors&&a.errors.length>0)throw a;return a}catch(t){throw t}}var p=(e=>(e.checkouts="checkouts",e.customers="customers",e.discounts="discounts",e.files="files",e.license_key_instances="license-key-instances",e.license_keys="license-keys",e.order_items="order-items",e.orders="orders",e.products="products",e.stores="stores",e.subscriptions="subscriptions",e.subscription_invoices="subscription-invoices",e.users="users",e.variants="variants",e))(p||{});async function R(r){let{storeId:s,...n}=r;return await u({params:{...s?{store_id:s}:{}},path:"/discounts",...n})}async function g(r){let{id:s,...n}=r;return u({path:`/discounts/${s}`,...n})}var E={listAllDiscounts:R,retrieveDiscount:g};export{E as default,R as listAllDiscounts,g as retrieveDiscount};
//# sourceMappingURL=discount.mjs.map